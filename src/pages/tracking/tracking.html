
<ion-header>
  <ion-toolbar color="ionBackground">
    <button class="align-left header-button" (click)="onHomeClick(); saveTrackedData()" icon-only>
      <ion-icon name="custom-home"></ion-icon>
    </button>
    <ion-title class="title">{{monthNames[dateSelected[1]] + " " + dateSelected[0] + ", " + dateSelected[2]}}</ion-title>
    <button class="align-right header-button" (click)="onClearClick()" icon-only>
      <ion-icon class="custom-reset-form-btn" name="custom-reset-form"></ion-icon>
    </button>
  </ion-toolbar>
</ion-header>

<ion-content text-center>
  <ion-card class="goal-title-card">
    <ion-card-header class="goal-card-header">
      <img class="goal-icon"  [src]="'../../assets/pages/' + goal.toLowerCase() + '_icon.svg' " alt="">
      <div class="goal-text-wrapper">
        <p class="goal-text">Track</p>
        <p class="goal-text">{{goal}} Data</p>
      </div>
      <button class="align-right info-button" icon-only>
        <img [src]="'../../assets/pages/info_icon.svg' " alt="">
      </button>
    </ion-card-header>
  </ion-card>

  <ion-card text-center>
      <ion-card-content class="goal-card center">
        <ng-container *ngFor=" let data of dataToTrack[goal]">
          <p class="data-name">{{data['name']}}</p>
          <data-element-tracking [data]="data" [dataVal]="getDataVal(data['id'])"
                                 [dataStart]="getDataStart(data['id'])" [dataEnd]="getDataEnd(data['id'])"
                                 [trackedMedsToday] = trackedMeds() (valueChanged) = 'changeVals($event, data, goal)'>
          </data-element-tracking>
          <div class="limit-wrapper" *ngIf="data['goal'] && data['goal']['freq'] && goal !== 'Symptom' ">
            <div class="limit-info-message">
              Total / goal :
              <p class="limit-value" [class.goal-ok]="goalProgress(data, goal) === 'at limit' ||
                            goalProgress(data, goal) === 'under'"
                 [class.goal-met]="goalProgress(data, goal) === 'met' ||
                            goalProgress(data, goal) === 'below limit'"
                 [class.goal-over]="goalProgress(data, goal) === 'over'">
                {{totalTrackedTimes(data, goal)}}</p> / <p class="limit-value goal-info">{{data['goal']['threshold']}}</p>
              per {{data['goal']['timespan'].toLowerCase()}}
            </div>
            <div class="goal-met limit-warning-message" *ngIf="goalProgress(data, goal) === 'met'">
              You met your goal!
            </div>
            <div class="goal-met limit-warning-message" *ngIf="goalProgress(data, goal) === 'below limit'">
              You're under your limit!
            </div>
            <div class="goal-ok limit-warning-message" *ngIf="goalProgress(data, goal) === 'at limit'">
              You're at your limit!
            </div>
            <div class="goal-ok limit-warning-message" *ngIf="goalProgress(data, goal) === 'under'">
              Keep going!
            </div>
            <div class="goal-over limit-warning-message" *ngIf="goalProgress(data, goal) === 'over'">
              Try to cut back!
            </div>
          </div>
        </ng-container>
      </ion-card-content>
  </ion-card>
</ion-content>

<ion-footer class="footer-wrapper">
  <div *ngIf="neighborData[goal][0] !== ''" (click)="onPreviousClick(); saveTrackedData()">
    <button class="align-left footer-button" icon-only>
      <ion-icon name="custom-chevron-left"></ion-icon>
    </button><p class="align-left footer-text text-left">{{neighborData[goal][0]+ "s"}}</p>

  </div>

  <div *ngIf="neighborData[goal][1] !== ''" (click)="onNextClick(); saveTrackedData()">
    <button class="align-right footer-button" icon-only>
      <ion-icon name="custom-chevron-right"></ion-icon>
    </button>
    <p class="align-right footer-text text-right" >{{neighborData[goal][1]+ "s"}}</p>
  </div>
</ion-footer>
